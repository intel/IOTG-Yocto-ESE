# this is the standard full sized image with LTS kernel as the default boot option
SELECTABLE_KERNEL_DEFAULT = "x86-lts-2020-kernel-default.inc"

# common contents and settings
require conf/include/ese-x86-image.inc

APPEND_append = "${@bb.utils.contains("LAYERSERIES_COMPAT_core","dunfell", " i915.enable_guc=2", "", d)}"
APPEND_append = "${@bb.utils.contains("LAYERSERIES_COMPAT_core","hardknott", " i915.enable_guc=7", "", d)}"

# SGX
KERNEL_PROVIDERS_EXTRA_MODULES[5.10] += "isgx"
IMAGE_INSTALL_append = " sgx isgx-blacklist"
RECOMMENDS_sgx_remove = "kernel-modules-isgx"
